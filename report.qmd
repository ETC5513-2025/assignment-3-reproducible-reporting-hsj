---
title: "Education & Career Success"
author: "Tran Dang Huy, Sia Chawla Chawla, Jiaqi Xu"

editor: source
embed-resources: true


# set report format 
format:
  pdf:
    toc: true
    theme: journal
    margin-top: 20mm
    margin-bottom: 25mm
    margin-left: 25mm
    margin-right: 25mm

# code chunk and result settings, globally, (method 1)
execute: 
  echo: false      # hide code chunk
  eval: true       # run the code
  include: true    # show output
  cache: false     
  warning: false
  message: false
  fig-align: "center"   # plot's position: left, center, or right
  fig-width: 6          # plot's width
  fig-height: 4         # plot's height
  out-width: "65%"      # % width of inserted image

# allow sectioning
number-sections: true
section-divs: true
section-depth: 3
---


```{r}
library(knitr)
library(tidyverse)
library(randomForest)
library(rsample)
library(e1071)
library(patchwork)
library(MASS)    
library(broom)  
```


# Executive summary {#sec-summary}
(Maximum of 4 sentences)


# Introduction {#sec-intro}
(Maximum 10 sentences)


Graduates today face many questions about how their experiences influence their careers. Grades alone may not determine who gets the best job opportunities or feels happiest at work. This report explores two main questions: Which student experiences are linked to receiving more job offers? And what makes graduates feel satisfied with their careers and achieve a good work-life balance?

To answer these questions, we use a dataset of 5,000 recent graduates from Kaggle. It includes information about students’ academic background, personal demographic, and career-related outcomes. Rather than testing predefined theories, this project takes an open-ended, pattern-oriented approach. The aim is to explore which types of experiences appear most consistently linked to job outcomes and personal satisfaction.


# Methodology {#sec-method}
(Maximum 300 words; Should include a figure and a table and those must be referenced in the text and have adequate captions)


This study uses an exploratory approach to investigate how students’ academic and experiential attributes may relate to early career outcomes. The dataset includes 5,000 graduate records collected from Kaggle.

```{r}
data <- read.csv("data/education_career_success.csv")
```

```{r}
# convert text liked variable into categorical variable
data <- data %>%
  mutate(across(where(is.character), as.factor))

# convert ordinal variable to ordered factor 
data <- data %>%
  mutate(
    Career_Satisfaction = factor(Career_Satisfaction, ordered = TRUE),
    Soft_Skills_Score = factor(Soft_Skills_Score, ordered = TRUE),
    Networking_Score = factor(Networking_Score, ordered = TRUE),
    Current_Job_Level = factor(Current_Job_Level,
                               levels = c("Entry", "Mid", "Senior", "Executive"), ordered = TRUE),
    Work_Life_Balance = factor(Work_Life_Balance, order = TRUE),
  )
```

```{r}
#| label: tbl-data
#| tbl-cap: "Dataset variables and their descriptions"

data %>% glimpse()
```

We began by examining the structure of the input variables. As shown in @tbl-data, the dataset contains a mix of continuous (e.g., `SAT_Score`), ordinal (e.g., `Certifications`), and categorical (e.g., `Field_of_Study`) features, with a wide range of unique values. This diversity limits the applicability of simple linear models and supports the use of flexible methods that can accommodate mixed data types and non-linear relationships.

We also analysed the outcome variables: `Job_Offers`, `Career_Satisfaction`, and `Work_Life_Balance.` As visualised in @fig-outcomeskew, all three outcomes are relatively well-distributed and show minimal skewness.

```{r}
#| label: fig-outcomeskew
#| fig-cap: "Distributions of Outcome Variables"

data %>%
  mutate(
    Career_Satisfaction = as.numeric(as.character(Career_Satisfaction)),
    Work_Life_Balance = as.numeric(as.character(Work_Life_Balance))
  ) %>%
  dplyr::select(Job_Offers, Career_Satisfaction, Work_Life_Balance) %>%
  pivot_longer(cols = everything(), names_to = "Variable", values_to = "Value") %>%
  ggplot(aes(x = Value)) +
  geom_histogram(binwidth = 1, fill = "steelblue", color = "white") +
  facet_wrap(~ Variable, scales = "free") +
  theme_minimal() +
  labs(x = "Value", y = "Count")
```

Given that `Job_Offers` is a count variable, we selected random forest regression, a non-parametric model capable of capturing complex relationships without strong distributional assumptions. For the ordinal outcomes, `Career_Satisfaction` and `Work_Life_Balance`, we applied ordinal logistic regression to model the ordered nature of the response while preserving interpretability.



# Results {#sec-result}
(Maximum 200 words. Should include either a figure or a table.)

## Random Forest for Number of Job Offers {#sec-r}

```{r}

outcome_var <- "Job_Offers"

predictors <- data %>%
  dplyr::select(-Student_ID, -Career_Satisfaction, -Work_Life_Balance) %>%
  dplyr::select(-all_of(outcome_var)) %>%
  names()

form <- as.formula(paste(outcome_var, "~", paste(predictors, collapse = " + ")))

set.seed(3)
rf_model <- randomForest(form, data = data, importance = TRUE)

```

```{r}
#| label: fig-rfimportance
#| fig-cap: "Importance of Predictors for Number of Job Offers Received"

rf_imp <- importance(rf_model, type = 1)
rf_imp_df <- as.data.frame(rf_imp) %>%
  rownames_to_column("Variable")

imp_col <- setdiff(colnames(rf_imp_df), "Variable")[[1]]  

rf_top10 <- rf_imp_df %>%
  arrange(desc(!!sym(imp_col)))

ggplot(rf_top10, aes(x = reorder(Variable, !!sym(imp_col)), y = !!sym(imp_col))) +
  geom_col(fill = "steelblue") +
  coord_flip() +
  theme_minimal() +
  labs(
    title = "Importance of Predictors for Job Offers",
    x = "Predictor",
    y = imp_col
  )
```

@fig-rfimportance shows the relative importance of predictors in the random forest model. Variables such as Internships_Completed, Certifications, and Years_to_Promotion were among the most influential in predicting job offers. Negative importance scores (e.g., for Age) suggest minimal or noisy contributions to model performance.



## Ordinal Logistic regression for career satisfaction

```{r}

outcome_var <- "Career_Satisfaction"

predictors <- data %>%
  dplyr::select(-Student_ID, -Job_Offers, -Work_Life_Balance) %>%
  dplyr::select(-all_of(outcome_var)) %>%
  names()

form <- as.formula(paste(outcome_var, "~", paste(predictors, collapse = " + ")))

olr_data <- data %>%
  dplyr::select(all_of(c(outcome_var, predictors))) %>%
  filter(if_all(everything(), ~ !is.na(.) & is.finite(.)))

olr_model <- polr(form, data = olr_data, Hess = TRUE)
```


```{r}
olr_imp <- tidy(olr_model) %>%
  filter(!str_detect(term, "\\|")) %>%
  mutate(AbsCoef = abs(estimate)) %>%
  arrange(desc(AbsCoef))
```

```{r}
ggplot(olr_imp, aes(x = reorder(term, AbsCoef), y = AbsCoef)) +
  geom_col(fill = "steelblue") +
  coord_flip() +
  theme_minimal() +
  labs(
    title = "Variable Importance (Ordinal Logistic Regression)",
    x = "Predictor", y = "Absolute Coefficient"
  )
```


# Discussion, conclusion and recommendations {#sec-discuss}


# Reference section {#sec-ref}
(Include at least 1 reference.)
 
